<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title> LINUX KERNEL启动参数 · 言在语中 </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="言在语中">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />





    <meta name="keywords" content="linux, 理论, Nlvi" />

<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "言在语中",
        author: "nigaha",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">










</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/tags/DHCP/" style="font-size: 14px;">DHCP</a> <a href="/tags/DNS/" style="font-size: 14px;">DNS</a> <a href="/tags/Kickstart应答文件/" style="font-size: 14px;">Kickstart应答文件</a> <a href="/tags/RAID/" style="font-size: 14px;">RAID</a> <a href="/tags/bash/" style="font-size: 14px;">bash</a> <a href="/tags/cobbler/" style="font-size: 14px;">cobbler</a> <a href="/tags/github/" style="font-size: 14px;">github</a> <a href="/tags/grep/" style="font-size: 14px;">grep</a> <a href="/tags/hexo/" style="font-size: 14px;">hexo</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/sed/" style="font-size: 14px;">sed</a> <a href="/tags/vim/" style="font-size: 14px;">vim</a> <a href="/tags/三剑客/" style="font-size: 14px;">三剑客</a> <a href="/tags/变量/" style="font-size: 14px;">变量</a> <a href="/tags/实验/" style="font-size: 14px;">实验</a> <a href="/tags/文件管理/" style="font-size: 14px;">文件管理</a> <a href="/tags/文本工具/" style="font-size: 14px;">文本工具</a> <a href="/tags/服务servers/" style="font-size: 14px;">服务servers</a> <a href="/tags/正则表达式/" style="font-size: 14px;">正则表达式</a> <a href="/tags/理论/" style="font-size: 14px;">理论</a> <a href="/tags/脚本/" style="font-size: 14px;">脚本</a> <a href="/tags/自动化安装系统/" style="font-size: 14px;">自动化安装系统</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">言在语中</a></span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        <li class="menu-item">
            <a href="javascript:;" id="search">
                <span>搜索</span>
                
                    <span class="menu-item-label">search</span>
                
            </a>
        </li>
        
        
        
            <li class="menu-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>标签</span>
                    
                        <span class="menu-item-label">tags</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/about">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
</header>
<div class="mobile-header">
    <div class="mobile-header-body">
        <div class="mobile-header-list">
            
            
                <div class="mobile-nav-item">
                    <a href="/">
                        <span>文章</span>
                        
                            <span class="menu-item-label">article</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/archives">
                        <span>归档</span>
                        
                            <span class="menu-item-label">archives</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item inner-cloud">
                    <div class="mobile-nav-tag">
                        <a href="javascript:;" id="mobile-tags">
                            <span>标签</span>
                            
                                <span class="menu-item-label">tags</span>
                            
                        </a>
                    </div>
                    <div class="mobile-nav-tagcloud">
                        <div class="mobile-tagcloud-inner">
                            <a href="/tags/DHCP/" style="font-size: 14px;">DHCP</a> <a href="/tags/DNS/" style="font-size: 14px;">DNS</a> <a href="/tags/Kickstart应答文件/" style="font-size: 14px;">Kickstart应答文件</a> <a href="/tags/RAID/" style="font-size: 14px;">RAID</a> <a href="/tags/bash/" style="font-size: 14px;">bash</a> <a href="/tags/cobbler/" style="font-size: 14px;">cobbler</a> <a href="/tags/github/" style="font-size: 14px;">github</a> <a href="/tags/grep/" style="font-size: 14px;">grep</a> <a href="/tags/hexo/" style="font-size: 14px;">hexo</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/sed/" style="font-size: 14px;">sed</a> <a href="/tags/vim/" style="font-size: 14px;">vim</a> <a href="/tags/三剑客/" style="font-size: 14px;">三剑客</a> <a href="/tags/变量/" style="font-size: 14px;">变量</a> <a href="/tags/实验/" style="font-size: 14px;">实验</a> <a href="/tags/文件管理/" style="font-size: 14px;">文件管理</a> <a href="/tags/文本工具/" style="font-size: 14px;">文本工具</a> <a href="/tags/服务servers/" style="font-size: 14px;">服务servers</a> <a href="/tags/正则表达式/" style="font-size: 14px;">正则表达式</a> <a href="/tags/理论/" style="font-size: 14px;">理论</a> <a href="/tags/脚本/" style="font-size: 14px;">脚本</a> <a href="/tags/自动化安装系统/" style="font-size: 14px;">自动化安装系统</a>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/about">
                        <span>关于</span>
                        
                            <span class="menu-item-label">about</span>
                        
                    </a>
                </div>
            
            
        </div>
    </div>
    <div class="mobile-header-nav">
        <div class="mobile-header-item" id="mobile-left">
            <div class="header-menu-item">
                <span class="header-menu-line"></span>
            </div>
        </div>
        <h1 class="mobile-header-title">
            <a href="/">言在语中</a>
        </h1>
        <div class="mobile-header-item"></div>
    </div>
</div>

    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年8月19日</span>
                
                
                    <span class="post-category"><a href="/categories/系统/">系统</a></span>
                
                
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                LINUX KERNEL启动参数
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/tags/linux/">linux</a>
                    
                        <a href="/tags/理论/">理论</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <h3 id="kernel在grub中配置的启动参数"><a href="#kernel在grub中配置的启动参数" class="headerlink" title="kernel在grub中配置的启动参数"></a>kernel在grub中配置的启动参数</h3><a id="more"></a>
<p>在Linux中，给kernel传递参数以控制其行为总共有三种方法：</p>
<pre><code>1. build kernel之时的各个configuration选项。

2. 当kernel启动之时，可以参数在kernel被GRUB或LILO等启动程序调用之时传递给kernel。

3.在kernel运行时，修改/proc或/sys目录下的文件。
</code></pre><p>这里讲的就是第二种方式了，kernel在grub中配置的启动参数。</p>
<p>首先，kernel有哪些参数呢？ 在linux的源代码中，有这样的一个文档<strong>Documentation/kernel-parameters.txt</strong> ，它介绍了kernel的各个参数及其意义。</p>
<p>其次，<strong>kernel启动参数以空格分隔，而且是严格区分大小写的</strong><br>    例如：mem和MEM是不一样的</p>
<p>再次，对于<strong>module特有的kernel参数写法</strong>是这样的，<strong>[module name].[parameter=XX]</strong>，<br>    例如，igb.max_vfs=7<br>    这个kernel启动参数的效果就是相当于这样来动态加载module: modprobe igb max_vfs=7</p>
<p>另外，kernel是怎样处理这些启动参数的呢？<br>     启动参数通常是这样的形式：<br>         name[=value_1][,value_2]…[,value_10]</p>
<p>“name”是关键字，内核用它来识别应该把”关键字”后面的值传递给谁，也就是如何处理这个值，是传递给处理进程还是作为环境变量或者抛给”init”。<br>    值的个数限制为10，你可以通过再次使用该关键字使用超过10个的参数。 </p>
<p>kernel检查关键字是不是 ‘root=’, ‘nfsroot=’, ‘nfsaddrs=’, ‘ro’, ‘rw’, ‘debug’ 或 ‘init’ </p>
<p>内核在bootsetups数组里搜索于该关键字相关联的已注册的处理函数，如果找到相关的已注册的处理函数，则调用这些函数并把关键字后面的值作为参数传递给这些函数。<br>    比如，你在启动时设置参数 name＝a、b、c、d，内核搜索 bootsetups 数组，如果发现”name”已注册，则调用”name”的设置函数如 name_setup()，并把 a、b、c、d 传递给 name_setup() 执行。 </p>
<p>所有型如”name＝value”参数，如果没有被上面所述的设置函数接收，将被解释为系统启动后的环境变量<br>    比如”TERM=vt100”启动参数就会被作为一个启动后的环境变量。</p>
<p>所有没有被内核设置函数接收也没又被设置成环境变量的参数都将留给init进程处理<br>    比如”single”</p>
<p>下面简单总结一些常用到的一些kernel启动参数。</p>
<p><strong>根磁盘相关启动参数：</strong></p>
<p>root  # 指出启动的根文件系统 如：root=/dev/sda1</p>
<p>ro  # 指定根设备在启动过程中为read-only，默认情况下一般都是这样配的</p>
<p>rw  # 和ro类似，它是规定为read-write，可写</p>
<p>rootfstype # 根文件系统类型，如：rootfstype=ext4</p>
<p><strong>Console和kernel log相关启动参数：</strong></p>
<p>console # console的设备和选项，如：console=tty0 console=ttyS0</p>
<p>debug # enable kernel debugging 启动中的所有debug信息都会打印到console上</p>
<p>quiet # disable all log messages 将kernel log level设置为KERN_WARNING，在启动中只非常严重的信息</p>
<p>loglevel # 设置默认的console日志级别，如：loglevel=7 （0~7的数字分别为：KERN_EMERG,..,KERN_DEBUG）</p>
<p>time # 设置在每条kernel log信息前加一个时间戳</p>
<p><strong>内存相关的启动参数：</strong></p>
<p>mem # 指定kernel使用的内存量，mem=n[KMG]</p>
<p>hugepages # 设置大页表页（4MB大小）的最多个数，hugepages=n</p>
<p><strong>CPU相关的启动参数：</strong></p>
<p>mce # Enable the machine check exception feature.</p>
<p>nosmp # Run as a single-processor machine. 不使用SMP（多处理器）</p>
<p>max_cpus # max_cpus=n, SMP系统最多能使用的CPU个数（即使系统中有大于n个的CPU）</p>
<p><strong>Ramdisk相关的启动参数：</strong></p>
<p>initrd # 指定初始化ramdisk的位置，initrd=filename</p>
<p>noinitrd # 不使用initrd的配置，即使配置了initrd参数</p>
<p><strong>初始化相关启动参数：</strong></p>
<p>init # 在启动时去执行的程序，init=filename，默认值为/sbin/init</p>
<p><strong>PCI相关的启动参数：</strong></p>
<p>pci # pci相关的选项，我常使用pci=assign_buses，也使用过pci=nomsi</p>
<p><strong>SELinux相关启动参数：</strong></p>
<p>enforcing # SELinux enforcing状态的开关，enforcing=0表示仅仅是记录危险而不是阻止访问，enforcing=1完全enable，默认值是0</p>
<p>selinux # 在启动时关闭或开启SELinux，selinux=0表示关闭，selinux=1表示开启selinux</p>
<p>另外，还是用max_loop来指定最多可使用的回路设备。</p>
<p>在Redhat的系统中，还有个经常看到的kernel启动参数——rhgb，rhgb表示redhat graphics boot，就是会看到图片来代替启动过程中显示的文本信息，这些信息在启动后用dmesg也可以看到<br>rhgb = redhat graphical boot – This is a GUI mode booting screen with most of the information hidden while the user sees a rotating activity icon spining and brief information as to what the computer is doing.</p>
<p>quiet = hides the majority of boot messages before rhgb starts. These are supposed to make the common user more comfortable. They get alarmed about seeing the kernel and initializing messages, so they hide them for their comfort.</p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料:"></a>参考资料:</h4><p>linux kernel documents</p>
<p>《Linux kernel in a nutshell》</p>

            
        
        </div>
        
            
            
        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/2017/10/27/Cobbler服务自动化安装部署系统/" id="art-left" class="art-right">
                <span class="next-title">
                    Cobbler服务自动化安装部署系统<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/2017/07/21/RAID(Redundant Array of Independent Disks)总结/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>常用RAID技术总结
                </span>
            </a>
        
    </nav>

        
    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2016 ~ 2017</span>
        <span>❤</span>
        <span>nigaha</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="http://nigaha.com"> 眼一睁 </a>
        </span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>
<script src="/script/search.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.mobileHeader();
    Nlvi.back2top();
    Nlvi.smoothScroll();
    Nlvi.onView();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward();

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
    
    <div class="search" id="search">
        <div class="mask" id="mask"></div>
        <div class="search-wrapper syuanpi">
            <h1 id="search-header" class="syuanpi">搜索一下？</h1>
            <div class="input">
                <input type="text" id="local-search-input" results="0" name="">
            </div>
            <div id="local-search-result"></div>
        </div>
    </div>
    <script>
    var GREETING = {
        morning: "当我们探索时，就要发现到真理",
        noon: "人的天职在于勇于探索真理。",
        after: "一件事实是一条没有性别的真理",
        night: "真理有时可能变得黯淡，但它永远不会熄灭",
        midnight: "真理在人那里获得生命力，并且展现出来"
    }
    $(document).ready(function(){
        Nlvi.search();
    });
    </script>

</body>
</html>
