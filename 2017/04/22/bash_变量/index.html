<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title> bash变量 · 言在语中 </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="言在语中">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />





    <meta name="keywords" content="linux, bash, 变量, Nlvi" />

<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "言在语中",
        author: "nigaha",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">










</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/tags/DHCP/" style="font-size: 14px;">DHCP</a> <a href="/tags/DNS/" style="font-size: 14px;">DNS</a> <a href="/tags/Kickstart应答文件/" style="font-size: 14px;">Kickstart应答文件</a> <a href="/tags/RAID/" style="font-size: 14px;">RAID</a> <a href="/tags/bash/" style="font-size: 14px;">bash</a> <a href="/tags/cobbler/" style="font-size: 14px;">cobbler</a> <a href="/tags/github/" style="font-size: 14px;">github</a> <a href="/tags/grep/" style="font-size: 14px;">grep</a> <a href="/tags/hexo/" style="font-size: 14px;">hexo</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/sed/" style="font-size: 14px;">sed</a> <a href="/tags/vim/" style="font-size: 14px;">vim</a> <a href="/tags/三剑客/" style="font-size: 14px;">三剑客</a> <a href="/tags/变量/" style="font-size: 14px;">变量</a> <a href="/tags/实验/" style="font-size: 14px;">实验</a> <a href="/tags/文件管理/" style="font-size: 14px;">文件管理</a> <a href="/tags/文本工具/" style="font-size: 14px;">文本工具</a> <a href="/tags/服务servers/" style="font-size: 14px;">服务servers</a> <a href="/tags/正则表达式/" style="font-size: 14px;">正则表达式</a> <a href="/tags/理论/" style="font-size: 14px;">理论</a> <a href="/tags/脚本/" style="font-size: 14px;">脚本</a> <a href="/tags/自动化安装系统/" style="font-size: 14px;">自动化安装系统</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">言在语中</a></span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        <li class="menu-item">
            <a href="javascript:;" id="search">
                <span>搜索</span>
                
                    <span class="menu-item-label">search</span>
                
            </a>
        </li>
        
        
        
            <li class="menu-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>标签</span>
                    
                        <span class="menu-item-label">tags</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/about">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
</header>
<div class="mobile-header">
    <div class="mobile-header-body">
        <div class="mobile-header-list">
            
            
                <div class="mobile-nav-item">
                    <a href="/">
                        <span>文章</span>
                        
                            <span class="menu-item-label">article</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/archives">
                        <span>归档</span>
                        
                            <span class="menu-item-label">archives</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item inner-cloud">
                    <div class="mobile-nav-tag">
                        <a href="javascript:;" id="mobile-tags">
                            <span>标签</span>
                            
                                <span class="menu-item-label">tags</span>
                            
                        </a>
                    </div>
                    <div class="mobile-nav-tagcloud">
                        <div class="mobile-tagcloud-inner">
                            <a href="/tags/DHCP/" style="font-size: 14px;">DHCP</a> <a href="/tags/DNS/" style="font-size: 14px;">DNS</a> <a href="/tags/Kickstart应答文件/" style="font-size: 14px;">Kickstart应答文件</a> <a href="/tags/RAID/" style="font-size: 14px;">RAID</a> <a href="/tags/bash/" style="font-size: 14px;">bash</a> <a href="/tags/cobbler/" style="font-size: 14px;">cobbler</a> <a href="/tags/github/" style="font-size: 14px;">github</a> <a href="/tags/grep/" style="font-size: 14px;">grep</a> <a href="/tags/hexo/" style="font-size: 14px;">hexo</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/sed/" style="font-size: 14px;">sed</a> <a href="/tags/vim/" style="font-size: 14px;">vim</a> <a href="/tags/三剑客/" style="font-size: 14px;">三剑客</a> <a href="/tags/变量/" style="font-size: 14px;">变量</a> <a href="/tags/实验/" style="font-size: 14px;">实验</a> <a href="/tags/文件管理/" style="font-size: 14px;">文件管理</a> <a href="/tags/文本工具/" style="font-size: 14px;">文本工具</a> <a href="/tags/服务servers/" style="font-size: 14px;">服务servers</a> <a href="/tags/正则表达式/" style="font-size: 14px;">正则表达式</a> <a href="/tags/理论/" style="font-size: 14px;">理论</a> <a href="/tags/脚本/" style="font-size: 14px;">脚本</a> <a href="/tags/自动化安装系统/" style="font-size: 14px;">自动化安装系统</a>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/about">
                        <span>关于</span>
                        
                            <span class="menu-item-label">about</span>
                        
                    </a>
                </div>
            
            
        </div>
    </div>
    <div class="mobile-header-nav">
        <div class="mobile-header-item" id="mobile-left">
            <div class="header-menu-item">
                <span class="header-menu-line"></span>
            </div>
        </div>
        <h1 class="mobile-header-title">
            <a href="/">言在语中</a>
        </h1>
        <div class="mobile-header-item"></div>
    </div>
</div>

    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年4月22日</span>
                
                
                    <span class="post-category"><a href="/categories/linux/">linux</a></span>
                
                
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                bash变量
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/tags/linux/">linux</a>
                    
                        <a href="/tags/bash/">bash</a>
                    
                        <a href="/tags/变量/">变量</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <h3 id="bash语言类型、变量分类"><a href="#bash语言类型、变量分类" class="headerlink" title="bash语言类型、变量分类"></a>bash语言类型、变量分类</h3><a id="more"></a>
<p>shell编程：</p>
<p>计算机：运行二进制指令</p>
<p>编译器，解释器</p>
<p>编程语言：机器语言，汇编语言，高级语言</p>
<p>高级语言：<br>    静态语言：编译型语言<br>        强类型（变量在使用前，必须事先声明，甚至还需要初始化）<br>            事先转换成可执行格式<br>            C、c++、java、C#</p>
<pre><code>动态语言：解释型语言
    弱类型（解释器）
        边解释边执行
        PHP、SHELL、python、perl
</code></pre><p>程序：指令+数据            </p>
<p>程序编程风格：<br>    面向过程：以指令为中心，数据服务于指令，比较适合大型场景<br>        shell、C<br>    面向对象：以数据为中心，指令服务于数据，比较适合小环境<br>        java、python、perl、C++</p>
<p>shell程序：提供了编程能力，解释执行        </p>
<p>变量：内存空间，命名的内存空间<br>    强类型变量：<br>        显式转换：<br>            变量不经过强制转换永远是这个数据<br>            不允许隐式转换<br>            一般定义变量是必须指定类型<br>            参与运算必须复合类型<br>            调用变量需要先声明变量并初始化<br>        变量在没有初始化之前是一段随机数，强类型引用前多数需要进行初始化变量。<br>            初始化（默认初始化）：<br>                字符串使用前为空；null<br>                数值使用前为零；0</p>
<pre><code>弱类型变量：
    隐式转换：
    语言运行时会隐式转换数据类型
    无需指定类型
    默认为字符型
    在内部进行转换后进行运算
    变量用时声明，其实就是直接使用
</code></pre><p>显示已定义的所有变量：set<br>删除变量：unset name                                </p>
<p>内存：编址的存储单元</p>
<p>进程：程序是指令、数据及其组织形式的描述，进程是程序的实体</p>
<p>变量类型：事先确定数据的存储格式和长度<br>    字符<br>    数值<br>        整数型<br>        浮点型<br>    真、假</p>
<p>变量附值：VAR_NAME=VALUE</p>
<p>整形：<br>    8bit保存256：0~255，后果溢出（溢出后只能保留其后8位数值），溢出会占用其他进程的数据</p>
<pre><code>缓冲区攻击：    
通过往程序的缓冲区写超出其长度的内容，造成缓冲区的溢出，从而破坏程序的堆栈，使程序转而执行其它指令，以达到攻击的目的
在当前网络与分布式系统安全中，被广泛利用的50%以上都是缓冲区溢出
简单的防止方法，当用户需要填入变量的时候首先进行条件判断,变量是否能够存下，能存下保存不能存储直接拒绝。
判断方式：根据变量类型和大小进行判断；
</code></pre><p>逻辑运算：与、或、非、异或<br>（0为假，其他为真）<br>与（&amp;）    ：乘积计算，只要有一个为假，结果一定为假；<br>或（|）    ：求和计算，只要有一个为真，结果一定为真；<br>非（！）：求反计算</p>
<p>bash变量类型：<br>    根据变量作用范围和变量表示类型划分；<br>        环境变量：<br>            生效范围为当前shell进程及其子进程生效；<br>        本地变量：<br>            生效范围为前shell进程<br>                对当前shell之外的其他shell进程均无效（包括当前shell的子shell进程）；<br>        局部变量<br>            生效范围为当前shell进程中某代码片段（通常指函数）；<br>        位置变量：<br>            $1,$2,…来表示，用于让脚本在脚本代码中调用通过命令行传递给它的参数；<br>        特殊变量：<br>            $?<br>            $0<br>            $*<br>            $@<br>            $#<br>            $$</p>
<p>本地变量：<br>    变量附值：VAR_NAME=’value’<br>    可以使用引用value:<br>        1.可以是直接字符串<br>            name=’root’<br>        2.变量引用<br>            $name=’$USER’<br>        3.命令引用<br>            name=’command’<br>            neme=$(command)</p>
<p>变量引用：${name};$name<br>    “”：弱引用，其中的变量引用会被替换为变量值；<br>    ‘’：强引用，七中的变量引用不会被替换为变量值，而是保持原字符串；<br>    {}：在容易引起变量混淆的情况下需要加{}，其他情况不需要加{}。<br>        例如：ANIMAL=pig,${ANIMAL}s=pigs</p>
<p>环境变量：<br>    变量声明，赋值<br>        export name = VALUE<br>        declare -x name = VALUE<br>    显示所有环境变量：<br>        env<br>        printenv<br>        export<br>        declare -x<br>    删除变量：unset name</p>
<p>bash内建的环境变量：<br>    -<br>    PATH<br>    SHELL<br>    USER<br>    UID<br>    HOME<br>    PWD<br>    SHLVL<br>    LANG<br>    MAIL<br>    HOSTNAME<br>    HISTSIZE</p>
<p>只读变量：只能声明，但不能修改和删除<br>    声明只读变量：<br>        readonly name<br>        declare -r name<br>    查看只读变量：<br>        readonly -P</p>
<p>位置变量：在脚本代码中调用通过命令行传递给脚本的参数<br>    $1,$2,…：对应第一，第二等参数，shift[n]换位置<br>    $0        ：命令本身<br>    $#        ：传递给脚本的参数的个数<br>    $<em>        ：传递给脚本的所有参数，全部参数合为一个字符串<br>    $@        ：传递给脚本的所有参数，每个参数为独立字符串<br>        $</em>,$@：只在被双引号好起来的时候再回有差异<br>    set –    ：清空所有位置变量</p>
<p>退出状态<br>进程使用退出状态来报告成功或失败<br>    0 ：代表成功<br>    1~255：代表失败<br>        1、2、127系统预留<br>    $?：变量保存最近的命令退出状态<br>例如：<br>    ping -c1 -w1 hostdown &amp;&gt; /dev/null; echo $?</p>
<p>退出状态码：<br>bash自定义退出状态码：<br>    exit [n]：自定义退出状态码<br>注意：<br>    脚本中一旦遇到exit命令，脚本会立即终止；终止退出状态取决于exit命令后面的数字；<br>    如果未给脚本指定退出状态码，整个脚本的退出状态码取决于脚本中执行的最后一条命令的状态码；</p>
<p>算数运算<br>bash中的算数运算：help let<br>    +、-、<em>、/、%取模（取余）、*</em>乘方</p>
<p>实现算数运算：<br>let var = 算数表达式<br>var = $[算数表达式]<br>var = $((算数表达式))<br>var = $(expr arg1 arg2 arg3 …)<br>declare -i var = 数值<br>echo ‘算术表达式’ | bc<br>乘法符号有些场景中需要转义<br>    例如：*</p>
<p>bash有内建的随机数生成器：<br>    $RANDOM (0-32767)<br>        例如：echo $[RANDOM %50]<br>            0-49之间的随机数</p>
<p>赋值：<br>增强型赋值：<br>    +=，-=，*=，/=，%=<br>let var OPER value<br>    例如：let count += 3<br>        自身加3后自附值<br>自增，自减：<br>    let var += 1<br>    let var ++<br>    let var -= 1<br>    let var –</p>
<p>逻辑运算：<br>true ：1<br>false ：0<br>与（&amp;）    ：乘积计算，乘积为1时为真，其余为假<br>或（|）    ：求和计算，求和为0时为假，其余为真<br>非（！）：求反计算，!0=1，!1=0</p>
<p>短路运算<br>短路与<br>当乘积为0时，结果为假<br>当乘积为1时，需要继续执行计算</p>
<p>短路或<br>当求和为非0时，结果为真<br>当求和为0时，需要继续执行计算</p>
<p>异或：<br>异或的两个值，相同为假，不同为真</p>
<p>条件测试<br>判断其需求是否满足，需要由测试机制来实现<br>专用的测试表达式需要由测试命令辅助来测试过程</p>
<p>评估布尔声明，以便用在条件性执行中<br>若真，则返回0<br>若假，则返回1</p>
<p>测试命令<br>etxt EXPRESSION<br>[ EXPRESSION ]<br>[[ EXPRESSION ]]<br>注：EXPRESSION 表达式前后必须有空白字符</p>
<p>条件性的执行操作符<br>根据退出状态而定，命令可以有条件的运行<br>    &amp;&amp; 代表条件行的 AND THEN<br>    || 代表条件性的 OR ELSE</p>
<p>hash的配置文件<br>按生效范围划分，存在两类：<br>    全局配置：<br>        /etc/profile<br>        /etc/profile.d/*.sh<br>        /etc/bashrc<br>    个人配置：<br>        ~/.hash_profile<br>        ~/.bashrc</p>
<p>shell登录的两种方式：<br>交互式登录：<br>    直接通过终端输入帐号密码登录<br>    使用 su -USERNAME 切换用户<br>执行顺序：<br>    /etc/profile<br>    /etc/profile.d/*.sh<br>    ~/.bash_profile<br>    ~/.bashrc<br>    /etc/bashrc</p>
<p>非交互式登录:<br>    su USERNAME<br>    图形界面下打开的终端<br>    执行脚本<br>    任何其他的hash实例<br>执行顺序：<br>    ~/.bashrc<br>    /etc/bashrc<br>    /etc/profile.d/*.sh</p>
<p>按功能划分，存在两类：<br>    profile类和bashrc类<br>profile类：为交互式登录的shell提供配置<br>    全局：<br>        /etc/profile<br>        /etc/profile.d/*.sh<br>    个人：<br>        ~/.bash_profile</p>
<p>功用：<br>    用于定义环境变量<br>    运行命令或脚本</p>
<p>bashrc类：<br>    为非交互式和交互式登录的shell提供配置<br>        全局：<br>            /etc/bashrc</p>
<pre><code>个人：
    ~/.bashrc
</code></pre><p>功用:<br>    定义命令别名和函数<br>    定义本地变量</p>
<p>编辑配置文件生效<br>修改profile和bashrc文件后需生效<br>两种方法：<br>    重新启动shell进程<br>    source或“.”<br>        例如：.~/.bashrc</p>
<p>bash退出任务<br>保存在~/.bash_logout文件中（用户）<br>在退出登录shell时运行<br>用于<br>    创建自动备份<br>    清楚临时文件</p>
<p>$ -变量<br>h：hashall，打开这个选项后，shell会讲明in个所在的路径hash下来，避免每次都要查询。<br>    通过she -h将h选项关闭<br>i：interactive-comments，包含这个选项说明当前的shell是一个交互式的shell。<br>    所谓的交互式shell，在脚本中，i选项是关闭的<br>m:monitor，打开监控模式就可以通过job control来控制进程和停止，继续，后台或者前台执行等<br>B：braceexpand，大括号扩展<br>H：history，H选项打开，可以展开历史列表中的命令，可以通过！感叹号来完成。<br>    例如：<br>        !!：返回最近的一个历史命令<br>        !n：返回第n个历史命令</p>

            
        
        </div>
        
            
            
        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/2017/04/23/bash_组合条件/" id="art-left" class="art-right">
                <span class="next-title">
                    bash组合条件判断<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/2017/04/21/bash_grep/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>grep使用方法
                </span>
            </a>
        
    </nav>

        
    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2016 ~ 2017</span>
        <span>❤</span>
        <span>nigaha</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="http://nigaha.com"> 眼一睁 </a>
        </span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>
<script src="/script/search.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.mobileHeader();
    Nlvi.back2top();
    Nlvi.smoothScroll();
    Nlvi.onView();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward();

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
    
    <div class="search" id="search">
        <div class="mask" id="mask"></div>
        <div class="search-wrapper syuanpi">
            <h1 id="search-header" class="syuanpi">搜索一下？</h1>
            <div class="input">
                <input type="text" id="local-search-input" results="0" name="">
            </div>
            <div id="local-search-result"></div>
        </div>
    </div>
    <script>
    var GREETING = {
        morning: "当我们探索时，就要发现到真理",
        noon: "人的天职在于勇于探索真理。",
        after: "一件事实是一条没有性别的真理",
        night: "真理有时可能变得黯淡，但它永远不会熄灭",
        midnight: "真理在人那里获得生命力，并且展现出来"
    }
    $(document).ready(function(){
        Nlvi.search();
    });
    </script>

</body>
</html>
